<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>量子销售经理智能体</title>\n    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">\n    <style>
        body {
            font-family: \'Inter\', sans-serif;
            background-color: #f5f5f5;
        }
        .chat-container {
            height: calc(100vh - 60px);
            display: flex;
            flex-direction: column;
        }
        .chat-header {
            background-color: #1a1a1a;
            color: white;
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chat-content {\n            flex: 1;
            display: flex;
            overflow: hidden;
        }\n        .sidebar {
            width: 240px;
            background-color: #1a1a1a;
            color: white;
            display: flex;
            flex-direction: column;
        }
        .main-content {\n            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: #1a1a1a;
        }
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            display: flex;
            flex-direction: column;
        }
        .message {
            margin-bottom: 16px;
            max-width: 80%;
        }
        .user-message {
            align-self: flex-end;\n            background-color: #3b82f6;
            color: white;
            border-radius: 12px 12px 12px 0;
        }
        .assistant-message {\n            align-self: flex-start;
            background-color: #374151;
            color: white;
            border-radius: 12px 12px 0 12px;
        }
        .message-content {
            padding: 12px 16px;
        }
        .message-content pre {
            white-space: pre-wrap;\n            font-family: monospace;
        }\n        .chat-input {
            padding: 16px;
            background-color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 12px;\n        }\n        .input-container {\n            flex: 1;
            display: flex;
            gap: 8px;\n        }\n        .input-field {
            flex: 1;
            background-color: #2d2d2d;
            border: none;
            border-radius: 8px;
            padding: 12px 16px;
            color: white;
            resize: none;
        }\n        .send-button {
            background-color: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }\n        .agent-card {
            background-color: #2d2d2d;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }\n        .agent-card:hover {
            background-color: #3d3d3d;
        }
        .agent-card.active {
            background-color: #3b82f6;
        }
        .agent-header {
            display: flex;
            align-items: center;
            gap: 8px;\n            margin-bottom: 8px;
        }
        .agent-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #3b82f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .agent-info {
            flex: 1;
        }
        .agent-name {
            font-weight: 600;
        }
        .agent-type {
            font-size: 12px;
            color: #9ca3af;
        }
        .tool-button {
            background-color: #2d2d2d;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            display: flex;
            align-items: center;
            gap: 6px;\n            cursor: pointer;
            margin-bottom: 8px;
        }
        .tool-button:hover {
            background-color: #3d3d3d;
        }
        .user-profile {
            position: absolute;
            bottom: 16px;
            left: 16px;
            display: flex;
            align-items: center;
            gap: 8px;\n            cursor: pointer;
        }\n        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #3b82f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .user-name {
            color: white;
            font-size: 14px;
        }
        .export-button {
            background-color: #2d2d2d;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            display: flex;
            align-items: center;
            gap: 6px;\n            cursor: pointer;
            margin-bottom: 8px;
        }
        .export-button:hover {
            background-color: #3d3d3d;
        }
        .thinking-indicator {
            display: flex;
            align-items: center;
            gap: 6px;\n            color: #9ca3af;
            font-size: 14px;
        }
        .thinking-dots {
            display: flex;
            gap: 2px;\n        }\n        .thinking-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background-color: #9ca3af;
            animation: pulse 1.5s infinite;\n        }\n        .thinking-dot:nth-child(2) {
            animation-delay: 0.5s;
        }
        .thinking-dot:nth-child(3) {
            animation-delay: 1s;
        }
        @keyframes pulse {
            0%, 100% {\n                opacity: 1;
            }
            50% {
                opacity: 0.3;
            }
        }
    </style>
</head>\n<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;\n
        // Agent Card Component
        const AgentCard = ({ agent, isActive, onClick }) => {
            return (
                <div 
                    className={`agent-card ${isActive ? \'active\' : \'\'}`}
                    onClick={onClick}
                >
                    <div className="agent-header">
                        <div className="agent-avatar">Q</div>
                        <div className="agent-info">
                            <div className="agent-name">{agent.name}</div>
                            <div className="agent-type">{agent.type}</div>
                        </div>
                    </div>
                </div>
            );
        };

        // Message Component
        const Message = ({ message }) => {
            const isUser = message.role === \'user\';
            
            return (
                <div className={`message ${isUser ? \'user-message\' : \'assistant-message\'}`}>
                    <div className="message-content">
                        {message.content.includes(\'```python\') ? (
                            <pre className="text-sm">{message.content}</pre>
                        ) : (
                            <p>{message.content}</p>
                        )}
                    </div>
                </div>
            );
        };

        // Thinking Indicator Component
        const ThinkingIndicator = () => {\n            return (
                <div className="thinking-indicator">
                    <span>思考中</span>\n                    <div className="thinking-dots">
                        <div className="thinking-dot"></div>
                        <div className="thinking-dot"></div>
                        <div className="thinking-dot"></div>
                    </div>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [messages, setMessages] = useState([
                {
                    id: 1,
                    role: \'assistant\',
                    content: \'你好！我是量子销售经理，专门负责量子计算解决方案的销售工作。很高兴为您服务！请告诉我您对量子计算的兴趣点，我会为您提供专业的咨询和建议。\'
                }
            ]);
            const [inputValue, setInputValue] = useState(\'\');
            const [isThinking, setIsThinking] = useState(false);
            const [activeAgent, setActiveAgent] = useState({
                id: 1,
                name: \'量子销售经理\',
                type: \'simple\'
            });

            const handleSendMessage = async () => {
                if (inputValue.trim() === \'\') return;
                
                // Add user message
                const userMessage = {\n                    id: messages.length + 1,
                    role: \'user\',
                    content: inputValue
                };
                setMessages([...messages, userMessage]);
                setInputValue(\'\');
                
                // Show thinking indicator
                setIsThinking(true);
                
                // Simulate assistant response
                setTimeout(() => {
                    const assistantMessage = {\n                        id: messages.length + 2,
                        role: \'assistant\',
                        content: \'```python\\n\\\'stream\\\'\\': True,\
\\\'timeout\\\'\\': self.config.timeout\
}\
params.update(kwargs)\
\
try:\\n    stream = sync_client.chat.completions.create(**params)\\n    for chunk in stream:\\n        if chunk.choices and chunk.choices[0].delta.content:\
            yield chunk.choices[0].delta.content\
except Exception as e:\
    raise Exception(f"DeepSeek流式调用失败：{str(e)}")\
\\n建议：\\n1. 推荐使用方案一：最简单直接，为同步流式调用使用独立的同步客户端\
2. 保持客户端分离：异步客户端用于 invoke()，同步客户端用于 stream_invoke()\
3. 检查API兼容性：确保DeepSeek的API确实支持OpenAI格式的流式响应\
\
您的 invoke() 方法是正确的，但 stream_invoke() 需要按照上述方案进行修改才能正常工作。\
\'
                    };
                    setMessages([...messages, userMessage, assistantMessage]);\n                    setIsThinking(false);
                }, 1000);\n            };

            const handleExport = () => {
                // In a real app, this would export the conversation
                alert(\'对话记录已导出！\');\n            };

            return (
                <div className="chat-container">
                    {/* Header */}
                    <div className="chat-header">
                        <div className="flex items-center gap-2">
                            <div className="text-blue-500 font-bold text-xl">DeepSeek</div>\n                            <div className="w-6 h-6 border border-gray-600 rounded flex items-center justify-center text-gray-400">\n                                <i className="fas fa-bars"></i>
                            </div>
                        </div>
                        <div className="text-white text-sm">用户请求硬编码知识生成</div>
                        <div className="flex items-center gap-4">
                            <button className="text-gray-400 hover:text-white">
                                <i className="fas fa-copy"></i>
                            </button>\n                            <button className="text-gray-400 hover:text-white">
                                <i className="fas fa-download"></i>
                            </button>\n                        </div>
                    </div>

                    {/* Content */}
                    <div className="chat-content">
                        {/* Sidebar */}
                        <div className="sidebar p-4">
                            <button className="w-full bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-md mb-4 flex items-center justify-center gap-2">
                                <i className="fas fa-plus"></i>
                                <span>开启新对话</span>
                            </button>\n                            
                            <div className="text-gray-400 text-sm mb-4">今天</div>
                            
                            <div className="text-gray-400 text-sm mb-4">
                                用户请求硬编码知识生成
                                <button className="ml-2 text-gray-500">\n                                    <i className="fas fa-ellipsis-h"></i>
                                </button>\n                            </div>
                            
                            <div className="text-gray-400 text-sm mb-4">异步会话资源释放最佳实践</div>
                            
                            <div className="text-gray-400 text-sm mb-4">昨天</div>
                            
                            <div className="text-gray-400 text-sm mb-4">智能体系统全流程测试设计</div>
                            <div className="text-gray-400 text-sm mb-4">Agent基类设计优化建议</div>
                            <div className="text-gray-400 text-sm mb-4">""智能体管理器 - 简化版本只负责...</div>
                            <div className="text-gray-400 text-sm mb-4">AgentService代码优化与职责分...</div>
                            
                            <div className="text-gray-400 text-sm mb-4">7天内</div>
                            <div className="text-gray-400 text-sm mb-4">多Agent智能体架构重构方案</div>
                            <div className="text-gray-400 text-sm mb-4">获取字典中第一个键的方法</div>
                            <div className="text-gray-400 text-sm mb-4">智能体配置设计建议</div>
                            <div className="text-gray-400 text-sm mb-4">SQL改写为CTE形式</div>
                            
                            <div className="text-gray-400 text-sm mb-4">30天内</div>
                            <div className="text-gray-400 text-sm mb-4">Python类型注解解析问题与改进...</div>
                            <div className="text-gray-400 text-sm mb-4">集团商机储备数: "商机创建时...</div>
                            
                            <div className="mt-auto">\n                                <div className="user-profile">
                                    <div className="user-avatar">L</div>
                                    <div className="user-name">漂流のパンツ_OFFICIAL</div>\n                                </div>
                            </div>
                        </div>

                        {/* Main Content */}
                        <div className="main-content flex flex-col">
                            {/* Messages */}
                            <div className="chat-messages">
                                {messages.map(message => (
                                    <Message key={message.id} message={message} />\n                                ))}
                                {isThinking && <ThinkingIndicator />}
                            </div>

                            {/* Input */}
                            <div className="chat-input">
                                <div className="input-container">
                                    <textarea
                                        className="input-field"
                                        placeholder="输入您的问题..."
                                        value={inputValue}
                                        onChange={(e) => setInputValue(e.target.value)}
                                        rows="1"
                                    />
                                </div>
                                <button 
                                    className="send-button"
                                    onClick={handleSendMessage}
                                >
                                    <i className="fas fa-paper-plane"></i>
                                </button>\n                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById(\'root\'));
    </script>
</body>\n</html>
